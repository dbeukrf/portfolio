# Story 1.2: Set Up Project Structure and Routing

## Status
DONE

## Story
**As a** developer,  
**I want** a well-organized folder structure and routing system,  
**so that** the application is maintainable and scalable.

## Acceptance Criteria
1. Folder structure includes: src/components, src/pages, src/hooks, src/utils, src/styles, src/services
2. React Router is installed and configured
3. Routes are defined for: Home (album view), Track pages (5 routes), 404 page
4. Basic layout component wraps all routes
5. Navigation between routes works correctly
6. Browser back/forward buttons work as expected
7. URL structure is clean and semantic (e.g., /track/university, /track/work)

## Tasks / Subtasks
- [x] Task 1: Create folder structure (AC: 1)
  - [x] Create src/components directory with subdirectories (audio, chat, navigation, projects, tracks, ui)
  - [x] Create src/pages directory
  - [x] Create src/hooks directory
  - [x] Create src/utils directory
  - [x] Create src/styles directory
  - [x] Create src/services directory
  - [x] Create src/stores directory for Zustand stores
  - [x] Create src/data directory for static data
- [x] Task 2: Install and configure React Router (AC: 2)
  - [x] Install react-router-dom@6.21.x
  - [x] Configure router in main.tsx
  - [x] Set up BrowserRouter wrapper
- [x] Task 3: Create route definitions (AC: 3)
  - [x] Define home route (/) for AlbumView
  - [x] Define track routes (/track/:trackId) for TrackView
  - [x] Define 404 route (*) for NotFound page
  - [x] Configure route parameters and validation
- [x] Task 4: Create basic layout component (AC: 4)
  - [x] Create Layout component with header/navigation
  - [x] Wrap all routes with Layout component
  - [x] Ensure consistent layout across all pages
- [x] Task 5: Implement navigation functionality (AC: 5, 6)
  - [x] Create navigation components (TrackList, TrackNavigation)
  - [x] Implement programmatic navigation
  - [x] Test browser back/forward functionality
  - [x] Ensure URL updates correctly on navigation
- [x] Task 6: Verify URL structure (AC: 7)
  - [x] Test all route URLs are semantic and clean
  - [x] Verify track routes use proper track IDs
  - [x] Ensure 404 handling works correctly

## Dev Notes

### Previous Story Insights
From Story 1.1 completion:
- Vite React + TypeScript project is set up in `apps/web/` directory
- All build tools and configurations are working
- Monorepo structure with pnpm workspaces is established
- Testing framework (Vitest + React Testing Library) is configured

### Technology Stack Requirements
[Source: architecture/tech-stack.md#technology-stack-table]
- **Routing:** React Router 6.21.x (client-side routing)
- **State Management:** Zustand 4.4.x (for future use)
- **Styling:** TailwindCSS 3.4.x (for styling components)
- **Package Manager:** pnpm 8.14.x (for dependency management)

### Project Structure Requirements
[Source: architecture/source-tree.md#unified-project-structure]
The folder structure must follow the exact specification:
```
apps/web/src/
├── components/           # Reusable UI components
│   ├── audio/           # Audio-related components
│   ├── chat/            # Chat interface components
│   ├── navigation/      # Navigation components
│   ├── projects/        # Project display components
│   ├── tracks/          # Track-related components
│   └── ui/              # Shared UI primitives
├── pages/               # Page components/routes
│   ├── AlbumView.tsx    # Landing page
│   ├── TrackView.tsx    # Individual track pages
│   └── NotFound.tsx     # 404 page
├── hooks/               # Custom React hooks
├── stores/              # Zustand state stores
├── services/            # API client services
├── utils/               # Utility functions
├── styles/              # Global styles
└── data/                # Static data
```

### Component Specifications
[Source: architecture/components.md#frontend-component-architecture]

**App Component:**
- Root component with routing setup
- Global state providers (Zustand, Theme)
- Error boundaries

**TrackView Component:**
- Props: `trackId: TrackId`
- Renders track header, content, audio controls
- Handles track navigation
- Dependencies: Track data, AudioPlayer, Visualization, Navigation components

**Layout Component:**
- Wraps all routes
- Provides consistent header/navigation
- Handles global layout structure

### Routing Configuration
[Source: architecture/tech-stack.md#technology-stack-table]
- Use React Router v6 with BrowserRouter
- Implement loader pattern for data fetching (future stories)
- Clean URL structure: `/track/university`, `/track/work`, etc.

### Critical Coding Standards
[Source: architecture/coding-standards.md#critical-rules]
- **Rule 6:** Component files must export default the main component
- **Naming Conventions:** Components use PascalCase (e.g., `TrackView.tsx`)
- **Rule 5:** All imports from shared package must use @shared alias (when shared types are created)

### File Locations
Based on the architecture, all new files should be created in `apps/web/src/` following the exact directory structure specified in the source tree.

### Testing Requirements
[Source: architecture/test-strategy-and-standards.md#unit-tests]
- **Framework:** Vitest + React Testing Library
- **File Convention:** `.test.tsx` files colocated with components
- **Coverage Requirement:** 70% minimum
- **Test Organization:** Unit tests colocated with source files

### Route Structure
The application should support these routes:
- `/` - Home/Album view (AlbumView component)
- `/track/:trackId` - Individual track pages (TrackView component)
  - `/track/university` - Track 1: University Years
  - `/track/work` - Track 2: Work Experience  
  - `/track/projects` - Track 3: Projects
  - `/track/skills` - Track 4: Skills
  - `/track/hobbies` - Track 5: Hobbies
- `/*` - 404 page (NotFound component)

### Navigation Requirements
- Track navigation should work between all 5 tracks
- Browser back/forward buttons must function correctly
- URL should update when navigating between tracks
- Navigation should be accessible and keyboard-friendly

## Testing

### Testing Standards
[Source: architecture/test-strategy-and-standards.md#unit-tests]
- **Framework:** Vitest + React Testing Library
- **Test File Location:** Colocated with source files (`.test.tsx`)
- **Testing Approach:** Test-after development with focus on critical paths
- **Coverage Goal:** 70% minimum

### Key Test Scenarios
1. Verify all routes render correct components
2. Test navigation between tracks works correctly
3. Verify browser back/forward functionality
4. Test 404 page displays for invalid routes
5. Verify URL structure is semantic and clean
6. Test that Layout component wraps all routes consistently

### Success Criteria
- All routes are accessible and render correct components
- Navigation between tracks works smoothly
- Browser back/forward buttons function as expected
- URL structure follows semantic naming convention
- 404 page handles invalid routes gracefully
- Layout component provides consistent structure across all pages

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-01-14 | 1.0 | Initial story creation | Bob (SM) |
| 2025-01-14 | 1.1 | Story implementation completed | James (Dev) |

## Dev Agent Record

### Agent Model Used
Claude Sonnet 4 (via Cursor)

### Debug Log References
- Folder structure creation: `mkdir -p components/audio, components/chat, components/navigation, components/projects, components/tracks, components/ui, pages, hooks, stores, services, utils, styles, data`
- React Router installation: `pnpm add react-router-dom@6.21.1`
- Test execution: `pnpm test` - All 8 tests passing
- Linting: `pnpm lint` - No errors
- Build verification: `pnpm build` - Successful build
- TypeScript config update: Excluded test files from app build

### Completion Notes List
- Successfully created complete folder structure following architecture specification
- Installed React Router 6.21.1 and configured BrowserRouter in main.tsx
- Created all required page components: AlbumView, TrackView, NotFound
- Implemented Layout component with consistent header and navigation
- Created navigation components: TrackList and TrackNavigation with full functionality
- Set up nested routing structure with proper route parameters
- All routes working correctly: home (/), track pages (/track/:trackId), 404 (*)
- Navigation between tracks works with Previous/Next buttons and browser back/forward
- URL structure is semantic and clean (e.g., /track/university, /track/work)
- Comprehensive test coverage with 8 passing tests
- All linting and build checks passing
- TypeScript configuration updated to exclude test files from production build

### File List
**Created Files:**
- `apps/web/src/pages/AlbumView.tsx` - Home page component with track list
- `apps/web/src/pages/TrackView.tsx` - Individual track page component
- `apps/web/src/pages/NotFound.tsx` - 404 error page component
- `apps/web/src/components/ui/Layout.tsx` - Main layout wrapper component
- `apps/web/src/components/navigation/TrackList.tsx` - Track listing component
- `apps/web/src/components/navigation/TrackNavigation.tsx` - Track navigation component
- `apps/web/src/pages/AlbumView.test.tsx` - AlbumView component tests
- `apps/web/src/pages/TrackView.test.tsx` - TrackView component tests
- `apps/web/src/components/navigation/TrackList.test.tsx` - TrackList component tests

**Modified Files:**
- `apps/web/src/main.tsx` - Added BrowserRouter wrapper
- `apps/web/src/App.tsx` - Implemented routing structure with nested routes
- `apps/web/src/App.test.tsx` - Updated to work with router context
- `apps/web/tsconfig.app.json` - Excluded test files from build
- `apps/web/package.json` - Added react-router-dom@6.21.1 dependency

**Created Directories:**
- `apps/web/src/components/audio/` - Audio-related components
- `apps/web/src/components/chat/` - Chat interface components
- `apps/web/src/components/navigation/` - Navigation components
- `apps/web/src/components/projects/` - Project display components
- `apps/web/src/components/tracks/` - Track-related components
- `apps/web/src/components/ui/` - Shared UI primitives
- `apps/web/src/pages/` - Page components/routes
- `apps/web/src/hooks/` - Custom React hooks
- `apps/web/src/stores/` - Zustand state stores
- `apps/web/src/services/` - API client services
- `apps/web/src/utils/` - Utility functions
- `apps/web/src/styles/` - Global styles
- `apps/web/src/data/` - Static data

## QA Results
*Results from QA Agent review of the completed story implementation*
